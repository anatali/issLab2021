<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>

<style>
/* Popup container - can be anything you want */
.popup {
  position: relative;
  display: inline-block;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* The actual popup */
.popup .popuptext {
  visibility: hidden;
  width: 260px;
  background-color: #F3F781;
  color: black;
  text-align: center;
  border-radius: 6px;
  padding: 8px 0;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  margin-left: -80px;
}

/* Popup arrow */
.popup .popuptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

/* Toggle this class - hide and show the popup */
.popup .show {
  visibility: visible;
  -webkit-animation: fadeIn 1s;
  animation: fadeIn 1s;
}

/* Add animation (fade in the popup) */
@-webkit-keyframes fadeIn {
  from {opacity: 0;} 
  to {opacity: 1;}
}

@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity:1 ;}
}
</style>

<script>
// When the user clicks on <div>, open the popup
function myFunction() {
  var popup = document.getElementById("myPopup");
  popup.classList.toggle("show");
}
</script>
<head>
   
<title>WEnvUsage2021</title></head>
    
<body>

<div class="body"> 

<h1>Lab ISS | Using the WEnv</h1> 
<a href="http://htmlpreview.github.com/?https://github.com/anatali/issLab2021/blob/main/it.unibo.issLabStart/userDocs/LectureBologna2021.html" target="isslm">LabISS-lectures site</a></font> 
<h2>Introduction</h2>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
<ol>
<li><a href="#create">Create</a>: Create a project starting from Gradle</li>
<li><a href="#run">Run</a>: Run the application built by Gradle as it is</li>

<li><a href="#intellij">IntelliJ</a>: Open the project in  IntelliJ </li>

<li><a href="#runtest">Run Test</a>: Look (and run) the Test built by Gradle <hr/></li>
<li><a href="#git">GIT</a>: Learning GIT</li>
<li><a href="#createremote">Create</a>: Create a remote repository </li>
<li><a href="#register">Register</a>: Register the project in GIT </li>
<li><a href="#localcommit">Commit</a>:  Local commit </li>
<li><a href="#saveremote">Save</a>: Save on a remote repo <hr/></li>
</ol> 

</td>
<td>
<ol>
<li><a href="#branch">Branch</a>: Open a new branch </li>
<li><a href="#modify">Modify</a>: Modify the application</li>
<li><a href="#branchcommit">Commit</a>: Commit the branch </li>
<li><a href="#merge">Merge</a>: Merge the branch  </li>
<li><a href="#branchdelete">Delete</a>: Delete the branch <hr/> </li>

<li><a href="#testappl">Testing</a>: Write and run our testing code</li>
<li><a href="#testreports">Reports</a>: Test reports <hr/></li>

<li><a href="#todo">Todo</a>: Home work</li>
 

</ol>
</td>
</tr>
 </tbody>
</table>


<h2 id="create">Start (create a project)</h2>


<table style="width:98%">
<tbody>	
<tr>
<td style="width:30%" >
<h3 id="create">Create a project using Gradle</h3>	
	
<pre>
mkdir	iss2021
cd	iss2021
	
mkdir it.unibo.wenvusage
cd it.unibo.wenvusage
<hr/>
gradle init (select 2, 3, 1, 2, 1, -, -)
</pre> 
</td>
<td>
 <center><img src="./img/startUpWithGradle.png" alt="startUpWithGradle" width="90%" ></center>
</td>
</tr>


<tr>
<td style="width:35%" >
<h3 id="run">Run the generated code</h3>	
See <a href="../app/src/main/java/it/unibo/wenvusage/App.java" target="code"><ks>app/src/main/java/it/unibo/wenvusage/App.java</ks></a>
<pre>
gradlew build -x test		<kc>//excludes testing</kc>	
gradlew run
</pre> 
</td>
<td>
<h4>Output</h4>
<pre>
> Task :app:run
Hello World!

BUILD SUCCESSFUL in 2s
2 actionable tasks: 1 executed, 1 up-to-date
</pre>
</td>
</tr>


<tr>
<td><h3 id="intellij">Open the project in <ks>IntelliJ</ks></h3>
Look at the generated file 
<a href="../app/build.gradle.kts" target="code"><ks>app/build.gradle.kts</ks></a>
<pre><m>
plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    application
}
repositories {
    // Use JCenter for resolving dependencies.
    jcenter()
}
dependencies {
    // Use JUnit test framework.
    testImplementation("junit:junit:4.13")
    // This dependency is used by the application.
    implementation("com.google.guava:guava:29.0-jre")
}
application {
    // Define the main class for the application.
    mainClass.set("it.unibo.wenvusage.App")
}
</m></pre>

</td>
<td>
<center><img src="./img/startUpUsage.png" alt="startUpUsage" width="80%" ></center>

Note the directories <ks>main</ks> and <ks>test</ks>.
</td>
</tr>

<tr>
<td style="width:35%" >
<h3 id="runtest">Run the generated test</h3>	
<pre>
gradlew build  	<kc>//does also the testing</kc>
gradlew test	<kc>//does only the tests</kc>
</pre> 
</td>
<td>
The execution of the tests produces the report 
<a href="../app/build/reports/tests/test/index.html" target="code"><kc>app/build/reports/tests/test/index.html</kc></a>
  
</td>
</tr>
 </tbody>
</table>

<h2>Use GIT</h2>
<table style="width:98%">
<tbody>	
<tr>
<td style="width:35%"><h3 id="git">Learning GIT</h3>
See: <a href="https://www.youtube.com/watch?v=HVsySz-h9r4"  target="web">GIT Command Line Basic (video)</a>

<pre><m>0:00  - Introduction
1:31  - Distributed vs Central Version Control
3:17  - Installing Git
3:39  - First Time Setup
6:36  - Getting Started (Local repository)
10:41 - Git File Control
14:55 - Getting Started (Remote repository)
20:37 - Branching
20:50 - Common Workflow
23:03 - Push Branch on remote
27:38 - Faster Example
29:41 - Conclusion
</m></pre>
</td>
<td>From  <a href="https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html"  target="code">Basic Git commands</a>:
<pre>
git config --global user.name "xyz"
git config --global user.email xyz@studio.unibo.it

git config -l 

git help CMD  
git CMD --help
</pre>
</td>
</tr>

<tr>
<td style="width:35%"><h3 id="register">Register the project in GIT</h3>

<pre>
git init	<kc>//creates the directory <ks>.git</ks>	</kc>
<m>Initialized empty Git repository in C:/iss2021/it.unibo.wenvusage/.git/</m>

git status
<m>On branch master
No commits yet
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        .gitattributes
        .gitignore
        .idea/
        app/
        gradle/
        gradlew
        gradlew.bat
        settings.gradle.kts
nothing added to commit but untracked files present (use "git add" to track)</m>
</pre>

<h3 id="createremote">Create a remote repo</h3>
<pre>
<kc>//create your GIT (xyz) on <a href="https://github.com/">github.com</a></kc>
git remote add origin <m>https://github.com/userxyz/reponame</m>  
<!-- git remote add origin https://github.com/anatali/iss2021LabOld -->
git remote -v
<m>origin  https://github.com/xyz (fetch)
origin  https://github.com/xyz (push)
</m>
<kc>//remove entries about remote repository from <a href="../../.git/config" target="code"><ks>.git/config</ks></a> file.</kc>
git remote rm origin </pre>
<!-- git remote set-url origin https://github.com/anatali/iss2021LabOld/it.unibo.wenvusage 
git remote set-url origin https://github.com/userxyz/newreponame		<kc>//to update</kc> -->


</td>
<td>
<h3 id="localcommit">Local commit</h3>
Look at the file (generated by Gradle) <a href="../.gitignore" target="code"><ks>.gitignore</ks></a>
<pre>
git status --ignored	<kc>//see ignored files</kc>

git add -A
git commit -m "initial"

git log
<m>commit 8d38456a18476a03940c74918c02c12d9bda3b1c (HEAD -> master, origin/master)
Author: ...
Date:   ...</m>

git status
<m>On branch master
nothing to commit, working tree clean</m>
</pre>

<h3 id="saveremote">Save on the remote repo</h3>
<pre>
git push origin master
</pre>

<h4>Multiple Git remotes</h4>
<div class="remark">
<m>When collaborating on a project with a group of people, you may find using <k>multiple Git remotes</k> very handy.</m>
</div>
<m>
The '<ks>fatal: refusing to merge unrelated histories</ks>' Git error occurs when two unrelated projects are merged.
For example, you have created a new repository, added a few commits to it, and now you are trying to pull 
from a remote repository that already has some commits of its own. 
Git will throw the error, since it has no idea how the two projects are related.
<br/>
To solve this problem:
<pre>
git pull origin master --allow-unrelated-histories
</pre>
</m>

<pre>
git branch -m main master
git fetch origin
git branch -u origin/master master
</pre>
</td>
</tr>

</tbody>
</table>

<h2 id="branch">Open a new branch</h2>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:35%" >

<pre>
git branch moverobot
git branch
<m>* master
  moverobot</m>
  
git checkout moverobot
<m>Switched to branch 'moverobot'</m>

git branch
<m>  master
* moverobot</m>
</pre>

<h3 id="modify">Modify the application</h3>
<ol>
<li>
Modify <a href="../app/build.gradle.kts" target="code"><ks>app/build.gradle.kts</ks></a>
<m>
	<ul>
	<li>Use the <a href="https://www.jacoco.org/jacoco/trunk/doc/mission.html" target="code">JaCoCo</a>  plugin</li>
	<li>Add dependencies for HTTP-client and JSON</li>
	<li>Change the main class</li>
	</ul>
</m>	
</li>
<li>
Write the Java class that defines the application:<br/>
 <a href="../app/src/main/java/it/unibo/wenvusage/MoveVirtualRobot.java" target="code">
<ks>app/src/main/java/it/unibo/wenvusage/MoveVirtualRobot.java</ks></a>
</li>

<li><k>Delete</k> App and AppTest
<pre>
git status
<m>
<ks>On branch moverobot</ks>
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
        modified:   app/build.gradle.kts
        deleted:    app/src/main/java/it/unibo/wenvusage/App.java
        deleted:    app/src/test/java/it/unibo/wenvusage/AppTest.java
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        app/src/main/java/it/unibo/wenvusage/MoveVirtualRobot.java
no changes added to commit (use "git add" and/or "git commit -a")
</m>
</pre>


</li>

</li>
</ol>
</td>

<td>
<center><img src="./img/modifiedByUser.png" alt="modifiedByUser" width="100%" ></center>
<h4>Execute</h4>
<pre>
gradlew build		<kc>//or Click of the G icons</kc> 
gradlew run		<kc>//the virtual robot makes some move</kc> 
</pre>

<h3 id="branchcommit">Commit the branch</h3>
<pre>
git add -A
git commit -m "move the robot"
</pre>

<h4>Push branch to remote</h4>
<pre>
git push -u origin moverobot

git branch -a
<m>  master
* moverobot
  remotes/origin/master
  remotes/origin/moverobot</m>
</pre>
</td>

</tr>


 
<tr>
<td style="width:35%" >
<h3 id="merge">Merge the branch</h3>
<pre>
git checkout master
	git pull origin master	<kc>//to check changes</kc>
	git branch --merged		<kc>//to check that there is no merge</kc>
git merge moverobot	 <kc>//do the merge</kc>

git push origin master	<kc>//update remote</kc>

git branch --merged<m>
	* master
	  moverobot</m>
	  
git branch -a<m>
	* master
	  moverobot
	  remotes/origin/master
	  remotes/origin/moverobot  </m>

</pre> 
</td>
<td>
<h3 id="branchdelete">Delete the branch</h3>
<pre>

<pre>
git branch -d moverobot	<kc>//delete the local branch</kc>
<m>Deleted branch moverobot (was 25420e0).</m>

git branch -a	<kc>//the branch is still on remote</kc>
<m>
* master
  remotes/origin/master
  remotes/origin/moverobot</m>
  
git push origin --delete  moverobot	<kc>//delete the branch on remote</kc>
<m>To https://github.com/anatali/iss2021Demo
 - [deleted]         moverobot</m>

git branch -a	<kc>//currently no branch</kc>
 <m>* master
  remotes/origin/master</m>
</pre>
</td>
</tr>
 
</tr>
 </tbody>
</table>

<h2 id="testing">Testing</h2>

<table style="width:98%">
<tbody>	

<tr> 
<td style="width:45%"><h3 id="testappl">Write and run our testing code</h3>
Write the Java class that defines the tests (using JUnit):
<a href="../app/src/test/java/it/unibo/wenvusage/TestMoveVirtualRobot.java" target="code">
<ks>app/src/test/java/it/unibo/wenvusage/TestMoveVirtualRobot.java</ks></a>
<pre>
gradlew build 			<kc>//does also the testing</kc>
gradlew build -x test		<kc>//excludes testing</kc>
gradlew test			<kc>//does the testing</kc>
</pre>

</td>
<td>
<h3 id="testreports">Test reports</h3>
The execution of the tests does produces the report 
<a href="../app/build/reports/tests/test/index.html" target="code"><kc>app/build/reports/tests/test/index.html</kc></a>

<br/><br/>
If we execute:
<pre>
gradlew test jacocoTestReport
</pre>
the  file 
<a href="../app/build/jacoco/test.exec" target="code">app/build/jacoco/test.exec</a>
generated by  <a href="https://www.jacoco.org/jacoco/trunk/doc/mission.html" target="code">JaCoCo</a>, is transformed in another report <br/>
<a href="../app/build/reports/jacoco/test/html/index.html" target="code"><kc>app/build/reports/jacoco/test/html/index.html</kc></a>
<br/>that shows the  coverage of code performed by the tests.
</td>
</tr>
 




 </tbody>
</table>

<h2 id="todo">Home work</h2>

<ol>
<li>Create a new project (<ks>it.unibo.boundaryWalk</ks>)</li>
<li>Create a support for using ws</li>
<li>Define (using JUnit) a TestPlan for the 'problema boundary'</li>
<li>Solve the 'problema boundary'</li>
<li>Run the test</li>
</ol>

See <a href="iss0.html">iss0.html</a>
<br/><br/> 



 <!--

<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
 

</td>
<td>
</td>
</tr>
 </tbody>
</table>
-->

 
<!--

<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
 

</td>
<td>
</td>
</tr>
 </tbody>
</table>

<h2>USING THE VIRTUAL ROBOT</h2>

Examples of clients are reported in project <a href="../../it.unibo.virtualrobotclient" target="code">it.unibo.virtualrobotclient</a>
-->

<!-- file:///C:/Didattica2018Work/iss2021Lab/it.unibo.virtualrobotclient/userDocs/VirtualrobotClient.html -->

 

</div>  
<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:center;font-size:small;color:white">
By AN Unibo-DISI    
</div> 
</body>
</html>